Execute (create event):
  let state = vimcastle#states#create()
  let state.scene = vimcastle#scene#loadintro('main')
  call state.scene.enter.invoke(state)
  let event = vimcastle#event#create('test')
    \.text('change scene')
    \.enterscene('Enter Plains', 'plains')

Execute (event executes):
  call event.invoke(state)

Then (state is updated):
  AssertEqual ['change scene'], state.log
  AssertEqual [{'label': 'Enter Plains (level 1)', 'key': 'e'}, {'label': 'Inventory', 'key': 'i'}, {'label': 'Character Sheet', 'key': 's'}], state.actions().display
