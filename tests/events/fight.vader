Execute (create event):
  let state = vimcastle#states#create()
  let state.player = vimcastle#character#create({'short':'', 'long':''}, 1)
  let monsters = vimcastle#repository#create()
  call monsters.add(1, vimcastle#monstergen#create('Imp', 'Imp'))
  let event = vimcastle#event#create('test').text('There is a %<enemy.name> before you!').fight('Fight', monsters)

Execute (event executes):
  call event.invoke(state)
  AssertEqual [{'label': 'Fight (level 1)', 'key': 'f'}], state.actions().display
  AssertEqual ['There is a <Imp> before you!'], state.log

Execute (fight):
  let result = state.actions().invokeByKey('f', state)

Then (change to fight screen):
  Assert result, 'Action was not called'
  AssertEqual 'fight', state.screen
