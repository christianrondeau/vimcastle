Execute (setup):
  let state = vimcastle#state#create()
  call vimcastle#io#setup()

Execute (no high scores):
  let highscoresfile = vimcastle#io#path('highscores.csv')
  if(filereadable(highscoresfile))
    call delete(highscoresfile)
  endif
  call state.enter('highscores')

Then (no high scores are shown):
  AssertEqual
  \ 'Events    Scenes    Fights    Score',
  \state.log[0]
  AssertEqual [
  \ '-          -          -          -'
  \], state.log[1]

Execute (some high scores):
  call writefile([
      \'24,2,17,24311',
      \'1,1,1,0'
      \], highscoresfile)
  call state.enter('highscores')

Then (high scores are shown):
  AssertEqual
  \ 'Events    Scenes    Fights    Score',
  \state.log[0]
  AssertEqual [
  \ '24        2         17        24311     ',
  \ '1         1         1         0         '
  \], state.log[1]

Execute (menu):
  call state.actions().invokeByKey('b', state)

Then (restarts game):
  AssertEqual 'menu', state.screen
