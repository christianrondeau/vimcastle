Execute (create event):
  let state = vimcastle#states#create()
  let state.player = vimcastle#character#create({'short':'', 'long':''}, 100)
  let state.player.health = 50

Execute (heal - partial):
  call state.clearlog()
  let result = vimcastle#effects#heal(state, 20)
  Assert result, 'Should work'
  AssertEqual 70, state.player.health
  AssertEqual ['You gain <+20> health.'], state.log

Execute (heal - full):
  call state.clearlog()
  let result = vimcastle#effects#heal(state, 40)
  Assert result, 'Should work'
  AssertEqual 100, state.player.health
  AssertEqual ['Your health is fully replenished!'], state.log

Execute (heal - full):
  call state.clearlog()
  let result = vimcastle#effects#heal(state, 10)
  Assert !result, 'Should not work'
  AssertEqual 100, state.player.health
  AssertEqual ['Your health is already full!'], state.log

Execute (gainhealth):
  call state.clearlog()
  let state.player.health = 90
  let result = vimcastle#effects#gainhealth(state, 20)
  AssertEqual 110, state.player.health
  AssertEqual 120, state.player.getmaxhealth()
  AssertEqual ['You gain <+20> to your maximum health permanently.'], state.log

Execute (gainstr):
  call state.clearlog()
  call state.player.setstat('str', 3)
  let result = vimcastle#effects#gainstr(state, 2)
  AssertEqual 5, state.player.getstat('str', 0)
  AssertEqual ['You feel stronger! gain <+2> to your strength permanently.'], state.log
